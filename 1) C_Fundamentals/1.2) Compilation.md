# Compliation Process in C :-

### *Compilation is the process of conversion of source code into machine code. C is a mid level language hence it must be converted to Machine level code.*

### A C program goes through the following process during compilation :-

<img width="414" height="491" alt="image" src="https://github.com/user-attachments/assets/02794645-1f29-4d5d-8c1f-7abd0c3fb2ab" />

### Steps of compilation :-

**1) Creation of source file :-**

   * create a C file in a code/text editor
   * for windows , save the file as filename.c
   * for linux , use "vi filename.c" to create a source file for c

**2) Compiling our source file :-**

   * the following command is used to compile our source file -> filename.c
     "gcc filename.c –o filename"
   * we can enable different options for the above code :-
   * using -Wall flag makes the compiler generate error messages which is useful for writing better code
   * using -o flag enables us to save the compiled file with a custom name , not using the flag will basically produce an a.out file
  
**3) Running the Executable :-**

   * after compiling our C program , an executable is generated and to run the executable :-
   * for windows, use filename
   * for linux, use .\filename
     
### What goes inside compilation process :-

A compiler converts a C source file into an executable, there are four phases in which this conversion happens :-

1) Pre-processing
2) Compilation
3) Assembling
4) Linking

**To get all intermediate files in the current directory along with the executable , we can use the following command <br>"gcc -Wall -save-temps filename.c –o filename" , you will see the following list of files:- <br><br>**
<img width="518" height="114" alt="image" src="https://github.com/user-attachments/assets/63166374-0c46-487e-8611-cc18c4584b9e" />

### 1) Pre-processing :-

It is the first phase our source code goes through, pre-processing basically involves :-

* expansion of macros
* removal of comments
* expansion of included files
* conditional compilation

After pre-processing, **filename.i** is created which contains pre-preprocessed code which is not like our source code but in the end our code is still preserved.

In the pre-processed file :-

* comments are removed hence
* it contains a+b instead of add(a,b)
* contents of header file <stdio.h> are added to our code, header files have been expanded

### 2) Compiling :-

The next step is compiling and it basically produces an intermediate compiled output file called **filename.s**, it basically contains Assembly level code.

### 3) Assembling :-

In this phase, **filename.s** is taken as input and converted to **filename.o**, only existing code is converted to machine language and functions such as printf() as still not resolved.

### 4) Linking :-

This is the final phase in which function calls are linked with their definitions. The linker knows where these functions have been implemented and does some extra work such as adding important code which is required when our program starts and ends.

For example, code might be required for setting up the environment and passing command line arguments. Which can be checked by using **size filename.o** and **size filename** which indicate overall growth of file from compiled file to executable.

Linking is of two types :-

1) **Static Linking** :-
   all code is copied into a single file and    then an executable file is created.

2) **Dynamic Linking** :-
   only names of shared libraries are added     to the code which can be referred during     execution.

**GCC does dynamic linking by default, here printf() is dynamically linked in the above program.**
